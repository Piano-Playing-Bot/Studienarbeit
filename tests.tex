\chapter{Tests}\label{tests}

\nocite{*}

% @Note(Val): Der zweite Satz hat nichts mit dem ersten zu tun, auch wenn es so aussieht als würden sie es tun.
% Wenn ich das richtig verstehe, sagst du, dass wir wir die maximale Geschwindigkeit bestimmen müssen, um die Software nicht schneller werden zu lassen.
% Aber wenn die Software zu schnell ist, ist das ja gar kein Problem.
% Es gibt der Software nur das Wissen, dass sie langsamer sein darf.
% Stattdessen ist das Wissen über die Maximalgeschwindigkeit in sich selbst einfach interessant, da es zeigt wie gut unser kosten-effizienter Prototyp ist
% @Note(Val): In kurz: Diese Einleitung muss neu geschrieben werden
Um eine Überbelastung der Komponenten und eine korrekte Funktionalität zu gewährleisten, müssen Software-seitig Begrenzungen eingeführt werden.
Um zum Beispiel die maximale Geschwindigkeit bestimmen zu können, mit der ein Stück gespielt werden kann, muss die maximale Frequenz eines physischen Tastendrucks berüclsichtigt werden.
Es wurden folgende Tests durchgeführt:

\subsubsection{T1 Max. Frequenz eines Tastendrucks:}

% @Note(Val): Dieser Test gehört eher in die Software-Umsetzung
% Alternativ, falls wir den Test hier lassen wollen, müsste ich hier noch ein-zwei Paragraphen dazu schreiben, wie das Problem in der Software gelöst wird
Erklärung: Software-seitig kann sehr genau angegeben werden, wann welche Taste gespielt wird (siehe Kapitel \enquote{\nameref{vorgehenSW-PIDI}}).
Hierbei kann auch die Frequenz, mit der dieselbe Taste hintereinander angespielt, wird bis auf mehrere hundert Hertz erhöht werden.
Da der Hubmagnet, bevor er einen erneuten Tastendruck initiieren kann, wieder in seinen Ausgangszustand zurückkehren muss, ist dieser der limitierende Faktor.
Im Endprodukt soll sichergestellt werden, dass alle Töne des Stücks auch wirklich erklingen. % @Note(Val): Dieser letzte Satz erklärt, warum es hier ein Problem geben kann. Dieser Satz sollte eher an den Anfang, um das Problem aufzuzeigen. Sonst argumentieren wir wieder falsch herum

Ablauf: Schrittweise wird software-seitig die Frequenz des Anspielens einer Taste erhöht.
Es werden mehrere Tasten für diesen Test verwendet, wobei der Fokus, auf Grund des höchsten Mechanik-Gewichts, auf der A0 Taste liegt. % @Note(Val): Was wird mit "Mechanik-Gewicht" gemeint? Vorher wird nie erwähnt, dass manche Tasten ein höheres Gewicht haben. Das wäre vielleicht wichtig vorher schon zu erwähnen
Während des Spielens wird eine Slow-Motion-Aufnahme des Hammers und der Klaviersaite angefertigt ud im Anschluss analysiert.
Wird die Saite angeschlagen, kann die Frequenz im nächsten Schritt erhöht werden.
Sollte sie nicht angeschlagen werden, ist die Limitation gefunden und kann in den Code aufgenommen werden.

Ergebnis: Ein Tasten-Magnet-Zyklus dauert durchschnittlich ca. 30ms und maximal ca. 40ms.
% @TODO(Val): Hier sollte vermutlich die Lösung im Code kurz erklärt werden

\subsubsection{T2 Min. Lautstärke:}

Erklärung: Um den am leisesten spielbaren Ton zu ermitteln, muss die minimale Spannung ermittelt werden, mit der eine Taste betätigt werden kann.
Wie in Kapitel \enquote{\nameref{subsec:aktuator}} erklärt, benötigt ein Hubmagnet eine entsprechende Ansprechspannung, um den Anker zu bewegen.
Da diese Spannung im Datenblatt des Hubmagneten nicht ersichtlich ist und das Tastengewicht sowieso mit einbezogen werden muss, muss diese Mindestspannung beim Klavier experimentell ermittelt werden.

Ablauf: Software-seitig wird der Wert, der die Intensität des Anschlags beschreibt (siehe Kapitel \enquote{\nameref{vorgehenSW-MC}}) schrittweise soweit reduziert, bis die Taste keinen Ton mehr spielt.
Dies wird an allen (mit Fokus auf den tieferen) Tasten durchgeführt, da sich die einzelnen Tasten in ihrem Ansprechverhalten teils deutlich unterscheiden. % @Note(Val): Erneut - warum wird erst jetzt erwähnt, dass sich die Tasten so stark unterscheiden? Wäre das bei der Konzeption oder dem Anbringen der Aktuatoren an das Piano nicht interessant zu wissen?
Anschließend wird der Größte der einzelnen Minima in den Code mit aufgenommen.

Ergebnis: Das leisteste Anspielen der Tasten ist mit einer Spannung von 17,3V möglich.
Dieses Ergebnis fließt in die Lautstärkeregelung der Software ein.
% @TODO(Val): Hier sollte vermutlich die Lösung im Code kurz erklärt werden
